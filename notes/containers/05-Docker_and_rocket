Docker and rocket

* Intro

.image images/docker-rkt.png

With Docker, you have to run a magical “docker daemon” that handles all my containers
With rkt, you just run a process.

    People have been telling me stories that sometimes if you do the Wrong Thing and the Docker daemon has a bug, then the daemon can get deadlocked and then you have to kill it and all your containers die. I assume they work pretty hard on fixing these bugs, but I don’t want to have to trust that the Docker daemon has no bugs that will affect me. All software has bugs!

If you treat your container more like a process, then you can just run it, supervise it with supervisord or upstart or whatever your favorite way to supervise a process is

My coworker told me a very surprising thing about containers. If you run just one process in a container, then it apparently gets PID 1? PID 1 is a pretty exciting process. Usually on your computer, init gets PID 1. In particular, if another container process gets orphaned, then it suddenly magically becomes a child of PID 1.

https://engineeringblog.yelp.com/2016/01/dumb-init-an-init-for-docker.html

I wrote a pretty bad blog post about container networking a while back. It can be really complicated! There are these “network namespaces” that I don’t really understand, and you need to do port forwarding, and why?

Do you really need to use this complicated container networking stuff? I kind of just want to run container processes and run them on normal ports in my normal network namespace and leave it at that. Is that wrong?

Unlike Docker, this means that if you use systemd to start rkt containers, you are actually monitoring the container process rather than monitoring a client process that connects to a daemon that in turn (directly or indirectly — depending on your Docker version) starts the container.


* Links

[[https://medium.com/@adriaandejonge/moving-from-docker-to-rkt-310dc9aec938#.a7fzbexh1][moving-from-docker-to-rkt]]
[[http://jvns.ca/blog/2016/09/15/whats-up-with-containers-docker-and-rkt/][whats-up-with-containers-docker-and-rkt]]
